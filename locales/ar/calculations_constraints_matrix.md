# إضافة العمليات الحسابية والقيود في سؤال المصفوفة

**آخر تحديث:**
<a href="https://github.com/kobotoolbox/docs/blob/aaabdac8ec257d3157ec2ab2ceae65130e8c12d4/source/calculations_constraints_matrix.md" class="reference">14
أبريل 2022</a>

عند العمل في أداة إنشاء النماذج، من السهل
[إضافة العمليات الحسابية](calculate_questions.md) أو
[القيود](validation_criteria.md) إلى أي نوع سؤال تقريبًا. بينما لا تدعم
أداة إنشاء النماذج حاليًا إضافة هذه الميزات إلى سؤال المصفوفة،
يمكنك استخدام XLSForm للقيام بذلك. ستوضح الخطوات المدرجة أدناه في هذا المقال
كيف يمكنك إضافة العمليات الحسابية والقيود إلى سؤال المصفوفة
باستخدام XLSForm.

## إعداد السؤال والحقول

**الخطوة 1: إنشاء سؤال مصفوفة في أداة إنشاء النماذج**

الخطوة الأولى هي إنشاء سؤال مصفوفة في أداة إنشاء النماذج (كما هو موضح في
المقال [نوع استجابة مصفوفة الأسئلة](matrix_response.md)). ببساطة
أضف صفوفًا وأعمدة مع المتغيرات اللازمة لجمع البيانات.

**الخطوة 2: تنزيل النموذج بصيغة XLSForm**

بمجرد إنشاء سؤال المصفوفة، **احفظ** النموذج و
[قم بتنزيله بصيغة XLSForm](getting_started_xlsform.md#downloading-an-xlsform-from-kobotoolbox).

**الخطوة 3: إضافة منطق إلى سؤال المصفوفة**

افتح XLSForm وأضف عناوين الأعمدة `calculation` و `constraint` و `constraint_message`.
باستخدام عناوين الأعمدة هذه، ستتمكن من إضافة تعبيرات _مجموع العمود_
و _مجموع الصف_ تحت عنوان العمود `calculation`. يمكنك
أيضًا إضافة _قيود_ مناسبة تحت عنوان العمود `constraint` و
_رسالة القيد_ تحت عنوان `constraint_message` حسب الحاجة.

بالإضافة إلى ذلك، يمكنك أيضًا اختيار إضافة عنوان العمود `read_only` لتقييد
جامعي البيانات من تحرير الاستجابات أثناء جمع البيانات لأسئلة معينة
(على سبيل المثال، _مجموع الصف_ و _مجموع العمود_ الذي يتم
حسابه).

![علامة تبويب الاستبيان](images/calculations_constraints_matrix/survey_tab.png)

<p class="note">
  في الصورة أعلاه، قد تلاحظ أن مدخلات <code>name</code>
  أقصر. في هذا المثال، تم إعادة تسميتها من تلك التي تم إنشاؤها تلقائيًا
  في أداة إنشاء النماذج لالتقاط لقطة الشاشة الكاملة لعلامة تبويب الاستبيان. إذا
  اخترت إعادة تسمية متغيراتك، تأكد من استخدام أسماء المتغيرات الجديدة في
  عناوين الأعمدة <code>calculation</code> و <code>constraint</code>. إذا كان
  النموذج قد تم نشره بالفعل وتم جمع البيانات، يُوصى
  بأن <em>لا</em> تعيد تسمية المتغيرات الموجودة.
</p>

**الخطوة 4: استبدال النموذج**

قم بتحميل واستبدال XLSForm الخاص بك ضمن المشروع الحالي، أو أنشئ مشروعًا جديدًا
(إذا لزم الأمر).

**الخطوة 5: نشر النموذج**

**الخطوة 6: جمع البيانات**

بعد نشر النموذج، يمكنك الانتقال إلى **FORM>Collect Data>OPEN** لبدء
جمع البيانات باستخدام نموذج الويب.

## عرض النتيجة

توضح الصور التالية كيف سيبدو النموذج ويعمل في
نموذج الويب Enketo بعد اتباع الخطوات المذكورة أعلاه:

**لم يتم إدخال أي بيانات:**

![Enketo لم يتم إدخال شيء](images/calculations_constraints_matrix/enketo_nothing_entered.png)

**حدث خطأ في الإدخال:**

![Enketo تم إدخال مدخلات خاطئة](images/calculations_constraints_matrix/enketo_wrong_inputs_entered.png)

هنا سترى أن هناك خمسة أفراد فقط من أفراد الأسرة. إذا
أدخل جامع البيانات 6 لعدد الذكور (0-14 سنة)، سيظهر القيد
رسالة خطأ.

**لا توجد أخطاء في الإدخال:**

![Enketo تم إدخال مدخلات صحيحة](images/calculations_constraints_matrix/enketo_correct_inputs_entered.png)

هنا، عند إدخال القيم في جدول المصفوفة، يتم
حساب الصفوف والأعمدة تلقائيًا.

<p class="note">
  يمكنك تنزيل XLSForm الذي تم استخدامه لهذا المقال
  <a
    download
    class="reference"
    href="./_static/files/calculations_constraints_matrix/calculations_constraints_matrix.xlsx"
    >هنا</a
  >.
</p>

## استكشاف الأخطاء وإصلاحها

-   يعمل سؤال المصفوفة فقط مع **نماذج الويب Enketo**. وهو غير
    مدعوم مع **تطبيق Android KoboCollect**.

-   سيظهر جدول المصفوفة مشوهًا إذا فشلت في تعيين التخطيط إلى
    **Grid-theme**. لمزيد من التفاصيل حول مظاهر نماذج الويب، يمكنك الرجوع إلى
    [استخدام أنماط نماذج الويب Enketo البديلة](alternative_enketo.md).