<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Dynamic data attachments &#8212; KoboToolbox  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="_static/kpi-icons/k-icons.css?v=f024171e" />
    <link rel="stylesheet" type="text/css" href="_static/css/kobo_theme.css?v=600002da" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/breadcrumbs.js?v=c8d147b4"></script>
    <script src="_static/js/common.js?v=8aedd183"></script>
    <script src="_static/js/custom_sections.js?v=1af9d801"></script>
    <script src="_static/js/home_page_toc.js?v=4ce414b4"></script>
    <script src="_static/js/scrollto.js?v=a0f31cce"></script>
    <script src="_static/js/sidebar_toc.js?v=87ef0ba3"></script>
    <script src="_static/js/smoothscroll-polyfill.js?v=181acdfa"></script>
    <script src="_static/js/table-sheets.js?v=ddec4369"></script>
    <link rel="icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pull Data Functionality in KoboToolbox" href="pull_data_kobotoolbox.html" />
    <link rel="prev" title="Adding Another Language to your XLSForm" href="language_xls.html" />
  <meta name="zd-site-verification" content="hdkx1desj8fzjecaf3fie" />
  
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  


  </head><body>
<header role="banner" class="main-header" id="main-header">
  <div class="main-header__logo-container">
    <a href="https://kobotoolbox.org/#home" class="main-header__logo">
      <img src="./_static/images/kobologo.svg" alt="KoboToolbox">
    </a>
  </div>
  <nav class="main-header__navigation" role="navigation">
    <ul>
      <li><a href=index.html>Home</a></li>
      <li><a href="https://support.kobotoolbox.org/about_kobotoolbox.html">About us</a></li>
      <li><a href="https://www.kobotoolbox.org/features">Features</a></li>
      <li><a href="https://www.kobotoolbox.org/services">Services</a></li>
      <li><a href="https://www.kobotoolbox.org/pricing">Pricing</a></li>
      <li><a href="https://www.kobotoolbox.org/blog">Blog</a></li>
      <li class="current"><a href="https://www.kobotoolbox.org/help">Help</a></li>
      <li>
        <a class="button" href="https://kobotoolbox.org/donate">Donate</a>
      </li>
    </ul>
  </nav>
</header>
<section class="main-search " role="search">
  <!-- copied and heavily changed content of built-in `searchbox.html` -->
  <div class="wrapper">
    <div class="main-search__content">
      <h1 class="main-search__header">What do you need help with?</h1>

      <p class="main-search__paragraph">Search the knowledge base, browse our resources, and visit our forum for more detailed information</p>

      <form id="searchbox" class="main-search__form" action="search.html" method="get">
        <div class="main-search__text-box-wrapper">
          <input
            class="main-search__text-box"
            type="search"
            name="q"
            aria-labelledby="searchlabel"
            placeholder="Type your search here"
          />

          <i class="icon main-search__magnifying-glass">
            <svg height="30" viewBox="0 0 30 30" width="30" xmlns="http://www.w3.org/2000/svg"><path d="m12.1784138 21.3122241c-2.43872739 0-4.73283609-.9499163-6.45760394-2.6746841-1.72629015-1.7247679-2.67620642-4.0188766-2.67620642-6.4591262 0-2.43872739.94991627-4.73283609 2.67620642-6.45760394 1.72476785-1.72629015 4.01887655-2.67620642 6.45760394-2.67620642 2.4387273 0 4.732836.94991627 6.4576039 2.67620642 1.7262901 1.72476785 2.6762064 4.01887655 2.6762064 6.45760394 0 2.4402496-.9499163 4.7343583-2.6762064 6.4591262-1.7247679 1.7247678-4.0188766 2.6746841-6.4576039 2.6746841zm17.8215862 6.5352413-8.2082509-8.2097732c1.6562643-2.1251332 2.5650784-4.7206576 2.5650784-7.4592784 0-3.25315881-1.2680773-6.31146297-3.5682752-8.61013857-2.2986756-2.3017202-5.3569798-3.56827523-8.6101385-3.56827523-3.25315881 0-6.31146297 1.26655503-8.61013857 3.56827523-2.3001979 2.2986756-3.56827523 5.35697976-3.56827523 8.61013857 0 3.2531587 1.26807733 6.3114629 3.56827523 8.6101385 2.2986756 2.3017202 5.35697976 3.5682752 8.61013857 3.5682752 2.7386208 0 5.3341452-.9072918 7.4592784-2.5666007l8.2097732 8.2097732z"/></svg>
          </i>
        </div>

        <input class="main-search__submit-button" type="submit" value="Go">
      </form>
    </div>

    <i class="icon main-search__arrow" id="main-search-arrow">
      <svg height="15" viewBox="0 0 23 15" width="23" xmlns="http://www.w3.org/2000/svg"><path d="m713.912501 361.966876c.534917-.563071 1.402814-.61966 2.004099-.154391l.116524.100016 11.144736 10.587496-11.144736 10.587502c-.600609.570579-1.550044.546234-2.120623-.054375-.534918-.563071-.546954-1.432728-.051482-2.009378l.105857-.111245 8.854124-8.412504-8.854124-8.412498c-.563071-.534917-.61966-1.402814-.154391-2.004099z" transform="matrix(0 1 -1 0 383.838929 -712.838929)"/></svg>
    </i>
  </div>

  <script>$('#searchbox').show(0);</script>
</section>

<div class="page page--has-sidebar " id="dynamic_data_attachment">
  <div class="page__wrapper">
      <section class="page__content">
        
        <nav class="page__breadcrumbs">
          <ul id="breadcrumbslist" class="breadcrumbs"><li class="breadcrumb breadcrumb--home">
            <a href="index.html"><svg height="12" viewBox="0 0 13 12" width="13" xmlns="http://www.w3.org/2000/svg"><path d="m6.19047619.012c.33057143 0 .64133333.1248.87533333.351l4.95176188 4.788c.3553334.3444.4611905.858.2692857 1.3074-.1912857.4512-.6407142.7416-1.144.7416h-.6190476v4.2c0 .3312-.2773333.6-.6190476.6h-2.47619047v-3h-2.47619048v3h-2.47619047c-.34171429 0-.61904762-.2688-.61904762-.6v-4.2h-.61904762c-.50204762 0-.95085714-.2904-1.14338095-.7404-.19252381-.4506-.08666667-.9642.26804762-1.308l4.95299999-4.7892c.23338096-.2256.54414286-.3504.87471429-.3504z"/></svg>Home</a>
          </li></ul>
        </nav>
        

        <section class="page__body" role="main">
          
  <section id="dynamic-data-attachments">
<h1>Dynamic data attachments<a class="headerlink" href="#dynamic-data-attachments" title="Link to this heading">¶</a></h1>
<p><strong>Last updated:</strong> <a href="https://github.com/kobotoolbox/docs/blob/0c4cbe231491ab3ee9bd1e3a82967d30ac63e2c6/source/dynamic_data_attachment.md" class="reference">15 Oct 2025</a></p>
<p>Dynamic linking allows you to use data from a <strong>parent project</strong> within <strong>child projects</strong>, simplifying the management of longitudinal data collection. This article explains how to dynamically link data between KoboToolbox projects.</p>
<p class="note">
    <strong>Note:</strong> Dynamic data attachments function similarly to the <a href="https://support.kobotoolbox.org/pull_data_kobotoolbox.html"><code>pulldata()</code></a> function but eliminate the need for separate CSV files, since the data from a linked parent project serves as the data source.
</p>
<p>You can retrieve various <strong>non-media responses</strong> from a parent project and perform calculations on this linked data in a child project. This can be useful for retrieving baseline data, contact information, or health records in cohort studies, or for confirming or verifying previously collected data.</p>
<p>We recommend using <a class="reference external" href="https://support.kobotoolbox.org/edit_forms_excel.html">XLSForm</a> to set up dynamic data attachments. For examples of parent and child projects, download sample files <a class="reference external" href="https://support.kobotoolbox.org/_static/files/dynamic_data_attachment/parent.xlsx">here</a> and <a class="reference external" href="https://support.kobotoolbox.org/_static/files/dynamic_data_attachment/child.xlsx">here</a>.</p>
<section id="dynamically-linking-projects-in-xlsform">
<h2>Dynamically linking projects in XLSForm<a class="headerlink" href="#dynamically-linking-projects-in-xlsform" title="Link to this heading">¶</a></h2>
<p>Dynamically linking projects requires a <strong>parent project</strong> and at least one <strong>child project</strong>. The <strong>parent project</strong> requires no modification from a normal XLSForm. However, setting up the <strong>child project(s)</strong> involves the following steps:</p>
<ol class="arabic simple">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">survey</span></code> worksheet of your XLSForm, add a row and set the question type to <code class="docutils literal notranslate"><span class="pre">xml-external</span></code>.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">name</span></code> column, provide a short name for the parent form. This name can consist of Latin alphabet characters, underscores, and numbers.</p></li>
</ol>
<p><strong>survey worksheet</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>type</p></th>
<th class="head text-left"><p>name</p></th>
<th class="head text-left"><p>label</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>xml-external</p></td>
<td class="text-left"><p>parent</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>survey</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li><p>Throughout the form, you can retrieve values from the parent project by creating a new question and including the appropriate expression in the <code class="docutils literal notranslate"><span class="pre">calculation</span></code> column (see table <a class="reference external" href="https://support.kobotoolbox.org/dynamic_data_attachment.html#calculation-syntax-for-dynamic-data-attachments">below</a>). You can use the following question types to retrieve data:</p>
<ul class="simple">
<li><p>Use a <strong>calculate</strong> question type to retrieve and store values for future use within the form or dataset (e.g., for calculations or dynamic question labels).</p></li>
<li><p>Use <strong>text</strong>, <strong>integer</strong>, <strong>decimal</strong>, <strong>select_one</strong>, or <strong>select_multiple</strong> question types to include retrieved values as default responses in editable fields. Data edited in the child project will not change the original data in the parent project.</p></li>
</ul>
</li>
</ol>
<p><strong>survey worksheet</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>type</p></th>
<th class="head text-left"><p>name</p></th>
<th class="head text-left"><p>label</p></th>
<th class="head text-left"><p>calculation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>xml-external</p></td>
<td class="text-left"><p>parent</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>text</p></td>
<td class="text-left"><p>participant_id</p></td>
<td class="text-left"><p>What is the participant’s ID?</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>integer</p></td>
<td class="text-left"><p>age</p></td>
<td class="text-left"><p>Confirm the participant’s age</p></td>
<td class="text-left"><p>instance(‘parent’)/root/data[enrollment_id = current()/../participant_id]/age</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>survey</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
<p class="note">
   <strong>Note:</strong> 
    To display linked data without allowing users to edit the field, use a <strong>calculate</strong> question followed by a <strong>note</strong> question that displays the calculated value. Alternatively, use <strong>text</strong>, <strong>integer</strong>, <strong>decimal</strong>, <strong>select_one</strong>, or <strong>select_multiple</strong> questions with the <code>read_only</code> column set to <code>TRUE</code>.
</p>
</section>
<section id="calculation-syntax-for-dynamic-data-attachments">
<h2>Calculation syntax for dynamic data attachments<a class="headerlink" href="#calculation-syntax-for-dynamic-data-attachments" title="Link to this heading">¶</a></h2>
<p>In the <code class="docutils literal notranslate"><span class="pre">calculation</span></code> column of the row where linked data will be retrieved, include one of the expressions in the table below. These expressions are called <strong>XPaths</strong>.</p>
<p>For each expression in the table below:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">parent</span></code> is the unique name assigned to the <strong>parent form</strong> (e.g., in the <code class="docutils literal notranslate"><span class="pre">xml-external</span></code> question of the <strong>child form</strong>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_question</span></code> refers to the <code class="docutils literal notranslate"><span class="pre">name</span></code> of a question from the <strong>parent form</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">child_question</span></code> refers to the <code class="docutils literal notranslate"><span class="pre">name</span></code> of a question from the <strong>child form</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_index_question</span></code> is the identifying question from the <strong>parent form</strong> that links it to the <strong>child form</strong> (e.g., unique ID, organization name).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">child_index_question</span></code> is the identifying question from the <strong>child form</strong> that links it to the <strong>parent form</strong> (e.g., unique ID, organization name).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_group</span></code> refers to the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the group in the <strong>parent form</strong> in which the <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> is located.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parent_index_group</span></code> refers to the <code class="docutils literal notranslate"><span class="pre">name</span></code> of the group in the <strong>parent form</strong> in which the <code class="docutils literal notranslate"><span class="pre">parent_index_question</span></code> is located.</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p><strong>XPath</strong></p></th>
<th class="head text-left"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">count(instance('parent')/root/data)</span></code></p></td>
<td class="text-left"><p>Returns the total number of rows in the parent project.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">count(instance('parent')/root/</span> <span class="pre">data[parent_group/parent_question])</span></code></p></td>
<td class="text-left"><p>Returns the total number of rows in the parent project where <code class="docutils literal notranslate"><span class="pre">parent_question</span></code>  (in <code class="docutils literal notranslate"><span class="pre">parent_group</span></code>) is not empty.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">count(instance('parent')/root/</span> <span class="pre">data[parent_group/parent_question=</span> <span class="pre">current()/../child_question]</span></code></p></td>
<td class="text-left"><p>Returns the total count of instances where the value of <code class="docutils literal notranslate"><span class="pre">parent_question</span></code>  (in <code class="docutils literal notranslate"><span class="pre">parent_group</span></code>) in the parent project is equal to the value of <code class="docutils literal notranslate"><span class="pre">child_question</span></code> in the child project.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">instance('parent')/root/</span> <span class="pre">data[parent_index_group/parent_index_question=</span> <span class="pre">current()/../child_index_question]/parent_group/</span> <span class="pre">parent_question</span></code></p></td>
<td class="text-left"><p>Returns the value of <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> (in <code class="docutils literal notranslate"><span class="pre">parent_group</span></code>) from the parent project where <code class="docutils literal notranslate"><span class="pre">child_index_question</span></code> in the child project is equal to <code class="docutils literal notranslate"><span class="pre">parent_index_question</span></code> in the parent project.</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">instance('parent')/root/</span> <span class="pre">data[parent_index_group/parent_index_question=</span> <span class="pre">current()/../child_index_question][position()=</span> <span class="pre">1]/parent_group/parent_question</span></code></p></td>
<td class="text-left"><p>Same as above, but specifies that only data from the first instance of <code class="docutils literal notranslate"><span class="pre">parent_index_question</span></code> should be returned, using the <code class="docutils literal notranslate"><span class="pre">[position()</span> <span class="pre">=</span> <span class="pre">1]</span></code> argument. Used in case of possible duplicates in the parent form.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">sum(instance('parent')/root/</span> <span class="pre">data/parent_group/parent_question)</span></code></p></td>
<td class="text-left"><p>Returns the sum of values from <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> (in <code class="docutils literal notranslate"><span class="pre">parent_group</span></code>) from the parent project. Note that <code class="docutils literal notranslate"><span class="pre">parent_question</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">numeric</span></code></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">max(instance('parent')/root/</span> <span class="pre">data/parent_group/parent_question)</span></code></p></td>
<td class="text-left"><p>Returns the maximum value entered in <code class="docutils literal notranslate"><span class="pre">parent_questio</span></code>n (in parent_group) from the parent project. Note that <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> must be numeric.</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p><code class="docutils literal notranslate"><span class="pre">min(instance('parent')/root/</span> <span class="pre">data/parent_group/parent_question)</span></code></p></td>
<td class="text-left"><p>Returns the minimum value entered in <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> (in <code class="docutils literal notranslate"><span class="pre">parent_group</span></code>) from the parent project. Note that <code class="docutils literal notranslate"><span class="pre">parent_question</span></code> must be numeric.</p></td>
</tr>
</tbody>
</table>
<p class="note">
    <strong>Note:</strong> If the parent question is not included in any group, omit <code>parent_group</code> from the expression
</p>
</section>
<section id="setting-up-projects-for-dynamic-linking">
<h2>Setting up projects for dynamic linking<a class="headerlink" href="#setting-up-projects-for-dynamic-linking" title="Link to this heading">¶</a></h2>
<p>Once your XLSForms are set up, log into your KoboToolbox account and follow these steps:</p>
<ol class="arabic simple">
<li><p>Upload and deploy the <strong>parent project</strong>, if not already deployed. Ensure the parent project has at least one submission.</p></li>
<li><p>Enable data sharing for the parent project:</p>
<ul class="simple">
<li><p>In the <strong>SETTINGS &gt; Connect Projects</strong> tab of the parent project, toggle the <strong>Data sharing</strong> switch (disabled by default) and click <strong>ACKNOWLEDGE AND CONTINUE</strong> in the confirmation window.</p></li>
<li><p>All data is shared by default, but you can restrict specific variables to share with child projects by clicking “Select specific questions to share”.</p></li>
</ul>
</li>
</ol>
<p class="note">
    <strong>Note:</strong> If projects have different owners, the parent project owner must <a href="https://support.kobotoolbox.org/managing_permissions.html">share the project</a> with the child project owner. The minimum permissions required for dynamic data attachments to work are <strong>View form</strong> and <strong>View submissions</strong>. Note that this allows child project administrators to view all parent project data.
</p>
<ol class="arabic simple" start="3">
<li><p>Upload and deploy the <strong>child project</strong>.</p></li>
<li><p>Connect the child project to the parent project:</p>
<ul class="simple">
<li><p>In the <strong>SETTINGS &gt; Connect Projects</strong> tab of the child project, click the “Select a different project to import data from.” A dropdown menu will allow you to select a parent project to link.</p></li>
<li><p>Rename the linked parent project to the <code class="docutils literal notranslate"><span class="pre">xml-external</span></code> question name defined in the XLSForm and click <strong>IMPORT</strong>.</p></li>
<li><p>You can then select specific questions from the parent project to share with the child project, or select all questions.</p></li>
</ul>
</li>
<li><p>If you add new fields to the parent form and wish to use them in the child project, re-import the parent project in the child project settings.</p></li>
</ol>
<p class="note">
    <strong>Note:</strong> Forms can only be linked together if they are on the same KoboToolbox server.
</p>
<iframe src="https://www.youtube.com/embed/pBqEsFlxqE4?si=6BPiDgOzO4LPO7zv" style="width: 100%; aspect-ratio: 16 / 9; height: auto; border: 0;" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</section>
<section id="dynamically-linking-a-form-to-itself">
<h2>Dynamically linking a form to itself<a class="headerlink" href="#dynamically-linking-a-form-to-itself" title="Link to this heading">¶</a></h2>
<p>It is possible for a parent and child project to be the same project. The steps are the same as those described above. Examples of use cases include:</p>
<ul class="simple">
<li><p><strong>Daily monitoring</strong>: If a form is used to survey the same person over time, you can link it to itself to count previous submissions. This can allow you to display a message (e.g., “monitoring is complete”) after a certain number of entries or to inform the enumerator of the number of forms submitted, as shown in the example below.</p></li>
</ul>
<p><strong>survey worksheet</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>type</p></th>
<th class="head text-left"><p>name</p></th>
<th class="head text-left"><p>label</p></th>
<th class="head text-left"><p>calculation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>xml-external</p></td>
<td class="text-left"><p>monitoring</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>text</p></td>
<td class="text-left"><p>participant_id</p></td>
<td class="text-left"><p>What is the participant’s ID?</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>calculate</p></td>
<td class="text-left"><p>count</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>count(instance(‘monitoring’)/root/ data[monitoring/participant_id = current()/../participant_id])</p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>note</p></td>
<td class="text-left"><p>monitoring_note</p></td>
<td class="text-left"><p>This participant has been surveyed ${count} times.</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>survey</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><strong>Registration form</strong>: By linking a registration form to itself, you can check whether a user has already been registered. This can allow you to generate an error message or add a constraint if they are already registered, preventing duplicate registrations, as shown in the example below.</p></li>
</ul>
<p><strong>survey worksheet</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head text-left"><p>type</p></th>
<th class="head text-left"><p>name</p></th>
<th class="head text-left"><p>label</p></th>
<th class="head text-left"><p>calculation</p></th>
<th class="head text-left"><p>relevant</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-left"><p>xml-external</p></td>
<td class="text-left"><p>registration</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>text</p></td>
<td class="text-left"><p>customer_id</p></td>
<td class="text-left"><p>What is the customer’s ID number?</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>calculate</p></td>
<td class="text-left"><p>count</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>count(instance(‘registration’)/root/ data[registration/customer_id = current()/../customer_id])</p></td>
<td class="text-left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-left"><p>note</p></td>
<td class="text-left"><p>already_registered</p></td>
<td class="text-left"><p>This customer is already registered. Please close this form.</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p>${count} &gt; 0</p></td>
</tr>
<tr class="row-even"><td class="text-left"><p>survey</p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
<td class="text-left"><p></p></td>
</tr>
</tbody>
</table>
</section>
<section id="collecting-and-managing-data-with-dynamic-linking">
<h2>Collecting and managing data with dynamic linking<a class="headerlink" href="#collecting-and-managing-data-with-dynamic-linking" title="Link to this heading">¶</a></h2>
<p>Data for dynamically linked projects can be collected using the <a class="reference external" href="https://support.kobotoolbox.org/kobocollect_on_android_latest.html">KoboCollect Android app</a> or <a class="reference external" href="https://support.kobotoolbox.org/data_through_webforms.html">Enketo web forms</a>.</p>
<p>When collecting data, note the following:</p>
<ul class="simple">
<li><p>The parent project must have at least one submission for the child project to function correctly.</p></li>
<li><p>When collecting data online, there is a five-minute delay in syncing new parent project data with the child project.</p></li>
<li><p>In offline mode, frequently download the child project to ensure data synchronization with the parent project.</p></li>
</ul>
<p class="note">
    <strong>Note:</strong> You can <a href="https://support.kobotoolbox.org/kobocollect_settings.html#form-management-settings">configure the KoboCollect Android app</a> to automatically update the parent project's data when an internet connection is available. Go to <strong>Settings > Form management > Blank form update mode</strong> and select either <strong>Previously downloaded forms only</strong> or <strong>Exactly match server</strong>. You can set the automatic download frequency to occur every 15 minutes, every hour, every six hours, or every 24 hours. Note that enabling this setting may increase battery consumption.
</p>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<details>
<summary><strong>Error or crash when linking forms</strong></summary>
Dynamic data attachments cannot connect to an empty parent project. Add at least one submission to the parent project first, then link the forms again.
</details>
<br>
<details>
<summary><strong>Parent data not showing in the child form</strong></summary>
Check that the calculation syntax in the child form is correct and that the relevant questions are shared in both projects. If your parent question is in a question group, be sure to include the group name in the XPath expression. Note that new parent project data takes up to five minutes to sync when you are online. If you add new fields to the parent form and want to use them in the child project, open the child project settings, re-import the parent project, and redeploy.
</details>
<br>
<details>
<summary><strong>Child form loads slowly</strong></summary>
Large dynamic data attachments can slow down form loading. Share only the questions the child form needs instead of the full list of questions, then redeploy and try again.
</details>
<br>
<details>
<summary><strong>Dynamic data not refreshing in KoboCollect</strong></summary>
If you are using KoboCollect and collecting data offline, data must first be submitted to the parent project and then downloaded to your data collection device for the dynamic data attachment to work. Both steps require an internet connection. Downloading parent data is similar to downloading a new version of a form, and the KoboCollect app can be configured to <a href="https://support.kobotoolbox.org/kobocollect_settings.html#form-management-settings">automatically download new data</a> at a set frequency. It is not recommended to rely on dynamic data attachments for data collected offline within a short period of time.
</details>
<br>
<details>
<summary><strong>Dynamic data attachment not working inside question groups</strong></summary>
To pull dynamic data from a parent form into a child form with question groups, ensure the index question (e.g., the identification number) in the child form is in the same group as the calculation for the dynamic data. See sample files <a href="https://community.kobotoolbox.org/uploads/short-url/z5RpC1M3wj9716z9qQ8pWx9Pb4V.xlsx">Round 1 (Within Groups).xlsx</a> and <a href="https://community.kobotoolbox.org/uploads/short-url/8JZvWJcrCxzKBllQYglRyAVyk03.xlsx">Round 2 (Within Groups).xlsx</a> for an example of dynamic data attachments within groups.
</details>
<br>
<details>
<summary><strong>Error evaluation fields in KoboCollect</strong></summary>
If your parent form contains duplicate submissions, you may receive an error message in KoboCollect stating “Error evaluating field / XPath evaluation: type mismatch /This field is repeated.” To solve this issue and pull data only from the first submission containing a specific index value, use the <code>[position()=1]</code> argument, as below:
<br><br>
<code>instance('parent')/root/data[parent_index_group/parent_index_question = current()/../child_index_question][position()=1]/parent_group/parent_question</code>
</details>
</section>
</section>


          <div class="clearer"></div>
        </section>

        

        <div class="page__back-to-top-container">
          <a href="#top" class="page__back-to-top">Back to top</a>
        </div>
        
          <section class="page__feedback">
            <h1>Was this article useful?</h1>

            <p>Did you find what you were looking for? Was the information clear? Was anything missing?<br>Share your feedback to help us improve this article!</p>

            <a
              href="https://ee-eu.kobotoolbox.org/single/OPizwor2?d[page]=Dynamic data attachments"
              class="feedback-button"
              target="_blank"
            >
              Fill out the short survey here &rarr;
            </a>
          </section>
      </section>

      
        <aside class="page__sidebar" role="navigation" aria-label="main navigation">

<div class="sidebar_tocs">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Introduction to KoboToolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quickstart guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_account.html">Creating an account on KoboToolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="formbuilder.html">Getting started with the KoboToolbox Formbuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_xlsform.html">Getting started with XLSForm</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Account &amp; Billing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="creating_account.html">Creating an account on KoboToolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="activation_link.html">Troubleshooting account activation link</a></li>
<li class="toctree-l1"><a class="reference internal" href="reset_password.html">Resetting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="two_factor_authentication.html">Setting up two-factor authentication in KoboToolbox</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Formbuilder</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="formbuilder.html">Getting started with the KoboToolbox Formbuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="question_types.html">List of Question Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="text_and_note.html">Text and Note question types</a></li>
<li class="toctree-l1"><a class="reference internal" href="select_one_and_select_many.html">“Select One” and “Select Many” question types</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledge.html">Acknowledge question type</a></li>
<li class="toctree-l1"><a class="reference internal" href="number_decimal_range.html">Number, Decimal, and Range Question Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="date_time.html">Date and time question types</a></li>
<li class="toctree-l1"><a class="reference internal" href="photo_audio_video_file.html">“Photo”, “Audio”, “Video” and “File” question types</a></li>
<li class="toctree-l1"><a class="reference internal" href="barcode_qrcode_questions.html">Barcode/QR code question type</a></li>
<li class="toctree-l1"><a class="reference internal" href="rating_ranking.html">Rating vs Ranking Question Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="external_file.html">Select One or Many From External File Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="gps_questions.html">GPS Question types</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculate_questions.html">Calculate Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_calculate.html">Advanced Calculate Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="collecting_signatures.html">Signature Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix_response.html">Question Matrix Response Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="responses_inside_question.html">Including Responses Inside Another Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="question_options.html">Using the Question Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="skip_logic.html">Adding skip logic in the Formbuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation_criteria.html">Adding validation criteria in the Formbuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="number_text_responses.html">Limits on Number and Text Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="cascading_select.html">Adding cascading select questions in the Formbuilder</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_repeat.html">Grouping questions and repeating groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="restrict_responses.html">Restricting Text Responses With Regular Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="language_dashboard.html">Adding Another Language in the Project Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="form_meta.html">Form Settings and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit_logging.html">Audit Logging Meta Question Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_format_web.html">Custom Formatting in Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternative_enketo.html">Using Alternative Enketo Web Form Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="question_library.html">Using the Question Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_public_collections.html">Using Public Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="public_collections_advanced_search.html">Public Collections Advanced Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="hxl.html">Using HXL Tags</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using XLSForm</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="edit_forms_excel.html">Editing Forms in Excel using XLSForm</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_xlsform.html">Getting started with XLSForm</a></li>
<li class="toctree-l1"><a class="reference internal" href="xls_url.html">Importing an XLSForm via URL</a></li>
<li class="toctree-l1"><a class="reference internal" href="media.html">Adding Various Types of Media (image, audio, video) to a Form</a></li>
<li class="toctree-l1"><a class="reference internal" href="language_xls.html">Adding Another Language to your XLSForm</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dynamic data attachments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dynamically-linking-projects-in-xlsform">Dynamically linking projects in XLSForm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculation-syntax-for-dynamic-data-attachments">Calculation syntax for dynamic data attachments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-projects-for-dynamic-linking">Setting up projects for dynamic linking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dynamically-linking-a-form-to-itself">Dynamically linking a form to itself</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collecting-and-managing-data-with-dynamic-linking">Collecting and managing data with dynamic linking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pull_data_kobotoolbox.html">Pull Data Functionality in KoboToolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="library_locking.html">Library locking</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Collecting Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data-collection-tools.html">Overview on Data Collection Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="enketo.html">What Are Enketo Web Forms?</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy_form_new_project.html">Deploying a Form to Start a New Data Collection Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="recording-interviews.html">Recording an Entire Interview with Background Audio Recording</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_through_webforms.html">Collecting Data through Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-offline.html">Collecting Data Offline</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobocollect_on_android_latest.html">Getting started with KoboCollect</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobocollect_settings.html">Customizing KoboCollect settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_collection_kobocollect.html">Data collection using KoboCollect</a></li>
<li class="toctree-l1"><a class="reference internal" href="transferring_forms.html">Transferring forms and data manually from one android device to another</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices_for_data_collection.html">Recommended Devices for Data Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_kobocollect.html">Troubleshooting KoboCollect Android Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting_webforms.html">Troubleshooting Enketo Web Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="collect_gps.html">Collecting GPS Locations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Managing Projects &amp; Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="project_summary.html">Project Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="record_validation.html">Record Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="delete_project.html">Deleting a Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="export_download.html">Exporting and downloading your data</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_export.html">Advanced options for exporting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_repeat_groups.html">Managing repeat group data</a></li>
<li class="toctree-l1"><a class="reference internal" href="archiving_projects.html">Archiving and Unarchiving Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="project_sharing_settings.html">Sharing projects with project-level settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_permissions.html">Sharing projects with user-level permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="export_gps.html">Mapping, Sharing, and Exporting GPS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto_edit_single_submissions.html">Editing or Deleting a Single Submission</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto_edit_multiple_submissions.html">Editing Responses in Multiple Submissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="photo_download.html">Downloading Photos and Other Media</a></li>
<li class="toctree-l1"><a class="reference internal" href="deleting_media.html">Deleting media files</a></li>
<li class="toctree-l1"><a class="reference internal" href="recovering_previous_formdata.html">Recovering Data From Previous Form Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started_organization_feature.html">Using the Team management feature</a></li>
<li class="toctree-l1"><a class="reference internal" href="activity_logs.html">Activity Logs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analyzing Data</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="creating_custom_reports.html">Viewing and Creating Custom Reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="transcription-translation.html">Transcription and translation of audio responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="qualitative_analysis.html">Qualitative Analysis of Audio Responses</a></li>
<li class="toctree-l1"><a class="reference internal" href="converting_to_spss_and_stata.html">Converting Data into SPSS and/or Stata</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">Getting started with the API</a></li>
<li class="toctree-l1"><a class="reference internal" href="synchronous_exports.html">Using the API for synchronous exports</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulling_data_into_excelquery.html">Connecting KoboToolbox to Microsoft Excel</a></li>
<li class="toctree-l1"><a class="reference internal" href="pulling_data_into_powerbi.html">Connecting KoboToolbox to Power BI</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging_dataset_excel_power_query.html">Merging Individual Data with Roster Data through Power Query in Excel</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_services.html">REST Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="upload_to_gis.html">Exporting and Uploading Data to GIS Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="kobotoolbox_monday_integration.html">KoboToolbox Integration on monday.com</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrating_api.html">Migrating from v1 to v2 API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Security &amp; Protection</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="is_my_data_safe.html">KoboToolbox data security measures: Keeping your data safe</a></li>
<li class="toctree-l1"><a class="reference internal" href="gdpr.html">General Data Protection Regulation (GDPR)</a></li>
<li class="toctree-l1"><a class="reference internal" href="hipaa_compliance.html">HIPAA Compliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_storage.html">Data Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="encrypting_forms.html">Encrypting Forms</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="p_codes.html">Including P-Codes in the Output Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="unique_serial_numbers.html">Creating Unique Serial Numbers in Forms</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_specified_other.html">User-Specified “Other” Responses for Multiple-Choice Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="lower_file_size.html">Lowering the File Size of Collected Media</a></li>
<li class="toctree-l1"><a class="reference internal" href="calculations_constraints_matrix.html">Adding Calculations and Constraints in a Matrix Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_skip_to_matrix.html">Adding Skip Logic to a Matrix Question</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_logo.html">Adding a Custom Logo</a></li>
<li class="toctree-l1"><a class="reference internal" href="stuck_in_pending.html">Exports Stuck in Pending State</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_upload.html">Manually Uploading Submissions</a></li>
</ul>

</div>




<section class="community-questions community-questions--sidebar">
  <div class="wrapper">
    <h1>Community Forum</h1>

    <p>For questions, ideas, and announcements on new releases, please head to our Community Forum.</p>

    <a class="button" href="https://community.kobotoolbox.org/">
      
      Visit our forum
      
    </a>
  </div>

   
        <br><br>
  

  <div class="wrapper">
    <h1>KoboToolbox Academy</h1>

    <p>KoboToolbox Academy offers high quality self-paced courses, created by KoboToolbox experts.</p>

    <a class="button" href="https://academy.kobotoolbox.org">
      Visit the KoboToolbox Academy
      
    </a>
  </div>
</section>

</aside>
      
  </div>
  <div class="clearer"></div>
</div>
  

  <div class="footer">
    <p>KoboToolbox is maintained by <a class="inline" href="https://www.kobotoolbox.org/about-us/">Kobo Inc.</a></p>
    <p>
        <a href="https://kobotoolbox.org/terms">Terms of Service</a>
        <a href="https://kobotoolbox.org/privacy">Privacy Policy</a>
    </p>
  </div>

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXLRR9N1R5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXLRR9N1R5');
  </script>
  

  <script>
    window.docs = {
      currentPagename: "dynamic_data_attachment",
      currentTitle: "Dynamic data attachments",
      currentUrl: ("index.html").replace("index.html", "dynamic_data_attachment.html"),
      rootUrl: "",
      sectionsData: {"account-billing": {"name": "account-billing", "title": "Account \u0026 Billing"}, "additional-resources": {"name": "additional-resources", "title": "Additional Resources"}, "analyzing-data": {"name": "analyzing-data", "title": "Analyzing Data"}, "collecting-data": {"name": "collecting-data", "title": "Collecting Data"}, "data-security-protection": {"name": "data-security-protection", "title": "Data Security \u0026 Protection"}, "getting-started": {"name": "getting-started", "title": "Getting Started"}, "integrations": {"name": "integrations", "title": "Integrations"}, "managing-projects": {"name": "managing-projects", "title": "Managing Projects \u0026 Data"}, "using-formbuilder": {"name": "using-formbuilder", "title": "Using the Formbuilder"}, "using-xlsform": {"name": "using-xlsform", "title": "Using XLSForm"}},
    };
  </script>
  </body>
</html>